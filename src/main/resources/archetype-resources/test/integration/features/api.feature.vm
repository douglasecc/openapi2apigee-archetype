@apiproxy
Feature: API proxy endpoints

#foreach($flow in $flows)
  @services @${flow.name}
  Scenario: Test ${flow.path.replaceAll("\{.*?\}", "*")} endpoint with custom header
    Given I use variables from app ${artifactId}-app-cicd${deployment.suffix}
    And I set `appHeaderName` header to `appHeaderValue`
    And I have basic authentication credentials `clientId` and `clientSecret`
#if($flow.verb.equals("POST"))
    And I pipe contents of file test/integration/sample-payloads/sample-payload.json to body
    And I set request body path $.transactionId to x-019876543212
#end
    When I ${flow.verb} #if($flow.verb.equals("POST"))to #end${flow.path.replaceAll("\{.*?\}", "1")}
    Then response code should be 200

#end

 